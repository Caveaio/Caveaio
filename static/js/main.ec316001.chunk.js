(this["webpackJsonpcavea-systems-panel"]=this["webpackJsonpcavea-systems-panel"]||[]).push([[0],{193:function(t,e,a){},349:function(t,e,a){"use strict";a.r(e);var r=a(0),i=a(69),s=a.n(i),o=(a(193),a(41)),c=a(34),n=a(16),l=a(30),d=a(31),p=a(24),u=a(32),b=a(35),h=a(166),x=a.n(h),m=a(2);var j=function(){return Object(m.jsx)("div",{className:"h-40 flex justify-center items-center",children:Object(m.jsx)(x.a,{type:"pacman",size:"custom",active:!0})})},g=a(33),y=a.n(g),v=function(t){return Object(m.jsxs)("p",{className:"text-left text-gray-900 dark:text-gray-200 text-xl subpixel-antialiased",children:[t.text,": ",t.data]})},O=6e4,f="https://cavea-test-api-php-review-develop-3zknud.cavea.dev",_=120,I=function(t){Object(u.a)(a,t);var e=Object(b.a)(a);function a(t){var r;return Object(l.a)(this,a),(r=e.call(this,t)).platform=r.props.platform,r.type=r.props.type,r.state={data:null,loading:!0,error:!1},r.getAverage=r.getAverage.bind(Object(p.a)(r)),r}return Object(d.a)(a,[{key:"componentDidMount",value:function(){this.getAverage(),this.updateMetric=setInterval(this.getAverage,O)}},{key:"componentWillUnmount",value:function(){clearInterval(this.updateMetric)}},{key:"getAverage",value:function(){var t,e=this,a="average";this.type.includes("_count")&&(a="aph"),t="".concat(f,"/api/logs/import/").concat(a),y.a.get("".concat(t),{params:{platform:this.platform,type:this.type}}).then((function(t){var a=t.data.avg;e.setState({data:a,loading:!1,error:!1})})).catch((function(){return e.setState({error:!0,loading:!1})}))}},{key:"render",value:function(){return!this.state.data||this.state.error||this.state.loading?this.state.error?Object(m.jsx)("p",{className:"text-center text-gray-900 dark:text-gray-200 text-xl subpixel-antialiased",children:"An Error Occurred!"}):Object(m.jsx)(j,{}):Object(m.jsx)(v,{data:this.state.data,text:this.props.text})}}]),a}(r.Component);var N=function(t){var e=Object(r.useState)(Object(c.a)(t.data)),a=Object(n.a)(e,1)[0];return Object(m.jsx)(m.Fragment,{children:a.map((function(e,a){return Object(m.jsx)(I,{platform:t.platform,type:e.type,text:e.text},"average-"+a)}))})},F=a(350),D=a(351),A=a(93),L=a(94),k=a(79),S=a(180),w=a(57),T=a.n(w);function E(t){var e,a=[],r={},i=new Date,s=function(t){return T()(t).format("YYYY-MM-DD")};for(t.map((function(t){return r[t.date]=t.count})),e=30;e>0;--e)a.push({date:s(i),count:r[s(i)]||0}),i.setDate(i.getDate()-1);return a.reverse()}var M=function(t){Object(u.a)(a,t);var e=Object(b.a)(a);function a(t){var r;return Object(l.a)(this,a),(r=e.call(this,t)).platform=r.props.platform,r.type=r.props.type,r.state={data:null,loading:!0,error:null},r.getTotalImports=r.getTotalImports.bind(Object(p.a)(r)),r}return Object(d.a)(a,[{key:"componentDidMount",value:function(){this.getTotalImports(),this.updateMetric=setInterval(this.getTotalImports,O)}},{key:"componentWillUnmount",value:function(){clearInterval(this.updateMetric)}},{key:"getTotalImports",value:function(){var t=this;y.a.get("".concat(f,"/api/logs/import/count_by_date"),{params:{platform:this.platform,type:this.type}}).then((function(e){var a=E(e.data).map((function(t){return{x:T()(t.date).format("YYYY-MM-DD"),y:parseInt(t.count)}}));t.setState({data:a,loading:!1,error:!1})})).catch((function(){return t.setState({error:!0,loading:!1})}))}},{key:"render",value:function(){return!this.state.data||this.state.error||this.state.loading?this.state.error?Object(m.jsx)("p",{className:"text-center text-gray-900 dark:text-gray-200",children:"An Error Occurred!"}):Object(m.jsx)(j,{}):Object(m.jsx)(F.a,{width:"100%",height:_,children:Object(m.jsxs)(D.a,{data:this.state.data,children:[Object(m.jsx)(A.a,{dataKey:"x",stroke:"#222",tick:!1}),Object(m.jsx)(L.a,{dataKey:"y",stroke:"#222"}),Object(m.jsx)(k.a,{}),Object(m.jsx)(S.a,{dataKey:"y",name:"Count",stroke:this.props.color,strokeWidth:5})]})})}}]),a}(r.Component),Y=function(t){Object(u.a)(a,t);var e=Object(b.a)(a);function a(t){var r;return Object(l.a)(this,a),(r=e.call(this,t)).platform=r.props.platform,r.type=r.props.type,r.state={data:null,loading:!0,error:null},r.getRuntime=r.getRuntime.bind(Object(p.a)(r)),r}return Object(d.a)(a,[{key:"componentDidMount",value:function(){this.getRuntime(),this.updateMetric=setInterval(this.getRuntime,O)}},{key:"componentWillUnmount",value:function(){clearInterval(this.updateMetric)}},{key:"getRuntime",value:function(){var t=this;y.a.get("".concat(f,"/api/logs/import/runtime"),{params:{platform:this.platform,type:this.type}}).then((function(e){t.setState({data:e.data,loading:!1,error:!1})})).catch((function(e){return t.setState({error:e,loading:!1})}))}},{key:"philipMethod",value:function(){var t="20px";return Object(m.jsxs)("div",{className:"health_container",style:{width:"100px",height:t,position:"relative",background:"linear-gradient(90deg, rgba(255,0,0,1) 0%, rgba(255,255,0,1) 25%, rgba(26,255,0,1) 100%)",display:"flex",alignItems:"center"},children:[Object(m.jsx)("div",{className:"health_bar",style:{height:t,width:"".concat(this.state.data.runtime,"%"),position:"absolute",right:0,top:0,backgroundColor:"lightgrey",zIndex:1}}),Object(m.jsxs)("p",{className:"subpixel-antialiased",style:{zIndex:2,paddingLeft:"20px",color:"rebeccapurple"},children:[this.state.data.sleep_time,"%"]})]})}},{key:"render",value:function(){return!this.state.data||this.state.error||this.state.loading?this.state.error?Object(m.jsx)("p",{className:"text-center text-gray-900 dark:text-gray-200 text-xl subpixel-antialiased",children:"An Error Occurred!"}):Object(m.jsx)(j,{}):this.philipMethod()}}]),a}(r.Component);var H=function(t){var e=Object(r.useState)(Object(c.a)(t.data)),a=Object(n.a)(e,1)[0];return Object(m.jsx)(m.Fragment,{children:a.map((function(e,a){return Object(m.jsx)(Y,{platform:t.platform,type:e.type,text:e.text},"runtime-"+a)}))})};var W=function(t){var e=Object(r.useState)(Object(c.a)(t.graphs));return Object(n.a)(e,1)[0].map((function(e,a){return Object(m.jsxs)("div",{className:"metric grid grid-cols-9",children:[Object(m.jsxs)("div",{className:"metric-header grid grid-flow-row-dense auto-rows-min col-span-2",children:[Object(m.jsxs)("div",{className:"grid grid-flow-col items-center",children:[Object(m.jsx)("h2",{className:"text-left font-semibold text-gray-900 dark:text-gray-200 text-xl subpixel-antialiased",children:e.header}),Object(m.jsx)(H,{data:e.runtime,platform:t.platform})]}),Object(m.jsx)(N,{data:e.averages,platform:t.platform})]}),Object(m.jsx)("div",{className:"col-span-7 grid-flow-row-dense",children:Object(m.jsx)(M,{platform:t.platform,color:t.color,type:e.total.type,width:200,height:120})})]},e.platform+e.header+a)}))};var C=function(t){return Object(m.jsxs)("div",{id:t.platform+"-metric",className:"grid",children:[Object(m.jsx)("h2",{className:"capitalize text-left font-bold text-3xl text-gray-900 dark:text-gray-200 subpixel-antialiased",children:t.platform}),Object(m.jsx)(W,{graphs:t.graphs,platform:t.platform,color:t.color})]})},P=a(355),G=a(183),B=function(t){Object(u.a)(a,t);var e=Object(b.a)(a);function a(t){var r;return Object(l.a)(this,a),(r=e.call(this,t)).boxName=r.props.boxName,r.params=r.props.params,r.state={data:null,loading:!0,error:null},r.getLogs=r.getLogs.bind(Object(p.a)(r)),r}return Object(d.a)(a,[{key:"componentDidMount",value:function(){this.getLogs(),this.updateMetric=setInterval(this.getLogs,O)}},{key:"componentWillUnmount",value:function(){clearInterval(this.updateMetric)}},{key:"getLogs",value:function(){var t=this;y.a.get("".concat(f,"/api/logs/ai/count_by_date"),{params:this.params}).then((function(e){var a=E(e.data).map((function(t){return{x:T()(t.date).format("YYYY-MM-DD"),y:parseInt(t.count)}}));t.setState({data:a,loading:!1,error:!1})})).catch((function(){return t.setState({error:!0,loading:!1})}))}},{key:"render",value:function(){return!this.state.data||this.state.error||this.state.loading?this.state.error?Object(m.jsx)("p",{className:"text-center text-gray-900 dark:text-gray-200",children:"An Error Occurred!"}):Object(m.jsx)(j,{}):Object(m.jsx)(F.a,{width:"100%",height:_,children:Object(m.jsxs)(P.a,{data:this.state.data,children:[Object(m.jsx)(A.a,{dataKey:"x",stroke:"#222",tick:!1}),Object(m.jsx)(L.a,{dataKey:"y",stroke:"#222"}),Object(m.jsx)(k.a,{}),Object(m.jsx)(G.a,{dataKey:"y",name:"Count",fill:this.props.color})]})})}}]),a}(r.Component);var z=function(t){var e=Object(r.useState)(Object(c.a)(t.graphs));return Object(n.a)(e,1)[0].map((function(t,e){return Object(m.jsxs)("div",{className:"metric grid grid-cols-9",children:[Object(m.jsx)("div",{className:"metric-header grid grid-flow-row auto-rows-min col-span-2",children:Object(m.jsx)("h2",{className:"text-left font-semibold text-gray-900 dark:text-gray-200 text-xl subpixel-antialiased",children:t.subTitle})}),Object(m.jsx)("div",{className:"col-span-7",children:Object(m.jsx)(B,Object(o.a)({},t))})]},t.subTitle+"-"+e)}))},K=function(t){Object(u.a)(a,t);var e=Object(b.a)(a);function a(t){var r;return Object(l.a)(this,a),(r=e.call(this,t)).aibox_id=r.props.params.aibox_id,r.state={data:null,loading:!0,error:null},r.getLatestLog=r.getLatestLog.bind(Object(p.a)(r)),r}return Object(d.a)(a,[{key:"componentDidMount",value:function(){this.getLatestLog(),this.updateMetric=setInterval(this.getLatestLog,O)}},{key:"componentWillUnmount",value:function(){clearInterval(this.updateMetric)}},{key:"getLatestLog",value:function(){var t=this;y.a.get("".concat(f,"/api/logs/ai/latest_log"),{params:{aibox_id:this.aibox_id}}).then((function(e){t.setState({data:e.data,loading:!1,error:!1}),console.log(t.state.data)})).catch((function(e){return t.setState({error:e,loading:!1})}))}},{key:"render",value:function(){return!this.state.data||this.state.error||this.state.loading?this.state.error?Object(m.jsx)("p",{className:"text-center text-gray-900 dark:text-gray-200 text-xl subpixel-antialiased",children:"An Error Occurred!"}):Object(m.jsx)(j,{}):Object(m.jsxs)("code",{children:[Object(m.jsxs)("p",{children:["activity: ",this.state.data.activity]}),Object(m.jsxs)("p",{children:["aibox_id: ",this.state.data.aibox_id]}),Object(m.jsxs)("p",{children:["created_at: ",this.state.data.created_at]}),Object(m.jsxs)("p",{children:["message: ",this.state.data.message]}),Object(m.jsxs)("p",{children:["process_id: ",this.state.data.process_id]}),Object(m.jsxs)("p",{children:["serverity: ",this.state.data.severity]}),Object(m.jsxs)("p",{children:["source_type: ",this.state.data.source_type]}),Object(m.jsxs)("p",{children:["sub_activity: ",this.state.data.sub_activity]}),Object(m.jsxs)("p",{children:["timestamp: ",this.state.data.timestamp]})]})}}]),a}(r.Component);var R=function(t){console.log(t);var e=Object(r.useState)(Object(c.a)(t.text));return Object(n.a)(e,1)[0].map((function(t,e){return Object(m.jsxs)("div",{className:"metric grid grid-cols-9",children:[Object(m.jsx)("div",{className:"metric-header grid grid-flow-row auto-rows-min col-span-2",children:Object(m.jsx)("h2",{className:"text-left font-semibold text-gray-900 dark:text-gray-200 text-xl subpixel-antialiased",children:t.subTitle})}),Object(m.jsx)("div",{className:"col-span-7",children:Object(m.jsx)(K,Object(o.a)({},t))})]},t.subTitle+"-"+e)}))};function U(t){if(t.graphs)return Object(m.jsx)(z,{graphs:t.graphs})}function X(t){if(t.text)return Object(m.jsx)(R,{text:t.text})}var J=function(t){return Object(m.jsxs)("div",{id:t.boxName+"-metric",className:"grid gap-y-5",children:[Object(m.jsx)("h2",{className:"capitalize text-left font-bold text-3xl text-gray-900 dark:text-gray-200 subpixel-antialiased",children:t.boxName}),Object(m.jsx)("div",{className:"grid grid-cols-2",children:U(t)}),Object(m.jsx)("div",{className:"grid",children:X(t)})]})},V=[{platform:"facebook",color:"#4267B2",graphs:[{header:"Posts",total:{type:"post_count"},averages:[{type:"process_handle",text:"H/h"},{type:"post_count",text:"P/h"}],runtime:[]},{header:"Live",total:{type:"streams_count"},averages:[{type:"process_stream_handle",text:"H/h"},{type:"streams_count",text:"S/h"}],runtime:[]}]},{platform:"instagram",color:"#C13584",graphs:[{header:"Posts",total:{type:"post_count"},averages:[{type:"process_handle",text:"H/h"},{type:"post_count",text:"P/h"}],runtime:[]},{header:"Stories",total:{type:"story_count"},averages:[{type:"process_story_handle",text:"H/h"},{type:"story_count",text:"S/h"}],runtime:[]}]},{platform:"twitch",color:"#6441a5",graphs:[{header:"Clips",total:{type:"post_count"},averages:[{type:"process_handle",text:"H/h"},{type:"post_count",text:"P/h"}],runtime:[]},{header:"Live",total:{type:"streams_count"},averages:[{type:"process_stream_handle",text:"H/h"},{type:"streams_count",text:"S/h"}],runtime:[]}]},{platform:"twitter",color:"#1DA1F2",graphs:[{header:"Posts",total:{type:"post_count"},averages:[{type:"process_handle",text:"H/h"},{type:"post_count",text:"P/h"}],runtime:[{type:"sleep_timer",text:"Idle% = x / 1,44"}]},{header:"Metrics",total:{type:"post_metric_count"},averages:[{type:"process_metric_handle",text:"H/h"},{type:"post_metric_count",text:"P/h"}],runtime:[]}]},{platform:"youtube",color:"#FF0000",graphs:[{header:"Videos",total:{type:"post_count"},averages:[{type:"process_handle",text:"H/h"},{type:"post_count",text:"P/h"}],runtime:[{type:"sleep_timer",text:"Idle% = x / 1,44"}]},{header:"Live",total:{type:"streams_count"},averages:[{type:"process_stream_handle",text:"H/h"},{type:"streams_count",text:"S/h"}],runtime:[]}]}].map((function(t){return Object(r.createElement)(C,Object(o.a)(Object(o.a)({},t),{},{key:t.platform}))})),q=[{boxName:"AIBOX1",graphs:[{subTitle:"Download Finished",color:"#F30482",params:{aibox_id:"aibox1",activity:"DOWNLOADING",sub_activity:"FINISHED"}},{subTitle:"Download Failed",color:"#F30482",params:{aibox_id:"aibox1",activity:"DOWNLOADING",sub_activity:"FAILED"}},{subTitle:"AI Finished",color:"#F30482",params:{aibox_id:"aibox1",activity:"ANALYSIS",sub_activity:"FINISHED"}},{subTitle:"AI Failed",color:"#F30482",params:{aibox_id:"aibox1",activity:"ANALYSIS",sub_activity:"FAILED"}}],text:[{subTitle:"Latest Log Entry",params:{aibox_id:"aibox1"}}]},{boxName:"AIBOX2",graphs:[{subTitle:"Download Finished",color:"#F30482",params:{aibox_id:"aibox2",activity:"DOWNLOADING",sub_activity:"FINISHED"}},{subTitle:"Download Failed",color:"#F30482",params:{aibox_id:"aibox2",activity:"DOWNLOADING",sub_activity:"FAILED"}},{subTitle:"AI Finished",color:"#F30482",params:{aibox_id:"aibox2",activity:"ANALYSIS",sub_activity:"FINISHED"}},{subTitle:"AI Failed",color:"#F30482",params:{aibox_id:"aibox2",activity:"ANALYSIS",sub_activity:"FAILED"}}],text:[{subTitle:"Latest Log Entry",params:{aibox_id:"aibox2"}}]},{boxName:"AIBOX3",graphs:[{subTitle:"Download Finished",color:"#F30482",params:{aibox_id:"aibox3",activity:"DOWNLOADING",sub_activity:"FINISHED"}},{subTitle:"Download Failed",color:"#F30482",params:{aibox_id:"aibox3",activity:"DOWNLOADING",sub_activity:"FAILED"}},{subTitle:"AI Finished",color:"#F30482",params:{aibox_id:"aibox3",activity:"ANALYSIS",sub_activity:"FINISHED"}},{subTitle:"AI Failed",color:"#F30482",params:{aibox_id:"aibox3",activity:"ANALYSIS",sub_activity:"FAILED"}}],text:[{subTitle:"Latest Log Entry",params:{aibox_id:"aibox3"}}]},{boxName:"AIBOX4",graphs:[{subTitle:"Download Finished",color:"#F30482",params:{aibox_id:"aibox4",activity:"DOWNLOADING",sub_activity:"FINISHED"}},{subTitle:"Download Failed",color:"#F30482",params:{aibox_id:"aibox4",activity:"DOWNLOADING",sub_activity:"FAILED"}},{subTitle:"AI Finished",color:"#F30482",params:{aibox_id:"aibox4",activity:"ANALYSIS",sub_activity:"FINISHED"}},{subTitle:"AI Failed",color:"#F30482",params:{aibox_id:"aibox4",activity:"ANALYSIS",sub_activity:"FAILED"}}],text:[{subTitle:"Latest Log Entry",params:{aibox_id:"aibox4"}}]}].map((function(t){return Object(r.createElement)(J,Object(o.a)(Object(o.a)({},t),{},{key:t.boxName}))})),Q=function(){return Object(m.jsxs)("div",{className:"p-5 mx-auto grid md:grid-cols-1 lg:grid-cols-2 gap-x-5",children:[Object(m.jsx)("div",{className:"import-logs",children:V}),Object(m.jsx)("div",{className:"ai-logs",children:q})]})},Z=function(t){t&&t instanceof Function&&a.e(3).then(a.bind(null,357)).then((function(e){var a=e.getCLS,r=e.getFID,i=e.getFCP,s=e.getLCP,o=e.getTTFB;a(t),r(t),i(t),s(t),o(t)}))};s.a.render(Object(m.jsx)(Q,{}),document.getElementById("root")),Z()}},[[349,1,2]]]);
//# sourceMappingURL=main.ec316001.chunk.js.map